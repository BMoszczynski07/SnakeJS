/*! For license information please see bundle.9b3ba5c541cc82391c97.js.LICENSE.txt */
(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var s;e.g.importScripts&&(s=e.g.location+"");var t=e.g.document;if(!s&&t&&(t.currentScript&&(s=t.currentScript.src),!s)){var a=t.getElementsByTagName("script");a.length&&(s=a[a.length-1].src)}if(!s)throw new Error("Automatic publicPath is not supported in this browser");s=s.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=s})();const s=e.p+"assets/point.a41846ef811ebc769132d677a9d33a21.mp3",t=e.p+"assets/gameover.0242c96fc833693dc721ea75ebb2d1b4.wav",a=e.p+"assets/speed_acceleration.952b0801786b04a70a0133de0ce831a6.wav",l=e.p+"assets/jump.ae2de8e7e136703f362699ea22c8a8c5.wav",o=e.p+"assets/start.105e220c664c62490ce0c19c670010fc.wav",c=new Audio,r=new Audio,n=new Audio,i=new Audio,d=new Audio,u=({min:e,max:s})=>(e=Math.ceil(e),s=Math.floor(s),Math.floor(Math.random()*(s-e+1))+e),m=class{constructor(e,s,t,a,l,o=0){this.direction=e,this.length=s,this.speed=t,this.x=a,this.y=l,this.jumps=o}},p=[],h={min:10,max:50};let y=(()=>{let e;for(;!e||e<h.min||e>h.max;){const s=prompt(`Podaj wielkość planszy (minimalna - ${h.min}, maksymalna - ${h.max}):`);e=parseInt(s),(!e||e<h.min||e>h.max)&&alert("Wprowadź poprawną wartość!")}return e})(),f={class:"",set:({payload:e,attr:s})=>{s?f.class[s]=e:f.class=e}},x={class:"",set:({payload:e,attr:s})=>{s?x.class[s]=e:x.class=e}};const v=[];let k={val:!1,set:e=>{k.val=e}};const w=[];let g={time:0,increment:()=>{g.time++}},b={isMuted:!1,toggle:()=>{b.isMuted=!b.isMuted}},M={val:0,set:e=>{M.val=e}},L={interval:"",set:e=>{L.interval=e}},S={interval:"",set:e=>{S.interval=e}},A={state:!1,set:e=>{A.state=e}};const E=document.querySelector("[data-parameter=time]"),q=document.querySelector("[data-parameter=board-size]"),I=document.querySelector("[data-parameter=speed]"),$=document.querySelector("[data-parameter=length]"),C=(document.querySelector("[data-direction=top]"),document.querySelector("[data-direction=bottom]"),document.querySelector("[data-direction=left]"),document.querySelector("[data-direction=right]"),document.querySelector(".gameboard")),j=document.querySelector(".sound"),z=document.querySelectorAll(".control"),F=({snakeLength:e,speed:s,timer:t,boardSize:a})=>{s&&(I.textContent=`${s}`),e&&($.textContent=`${e}`),a&&(q.textContent=`Rozmiar planszy: ${a}x${a}`),t&&(E.textContent=`Czas gry: \n    ${Math.floor(t/60/60)<10?"0"+Math.floor(t/60/60):Math.floor(t/60/60)}:${Math.floor(t/60)%60<10?"0"+Math.floor(t/60)%60:Math.floor(t/60)%60}:${t%60<10?"0"+t%60:t%60}\n    `)},W=class{constructor(e,s,t=""){this.name=t,this.x=e,this.y=s}},D=()=>{f.class.length,f.class.jumps,Math.floor(g.time/60/60),Math.floor(g.time/60),g.time,clearInterval(S.interval),clearInterval(L.interval),b.isMuted||d.play()},T=class extends W{handleIsEaten=()=>{if(f.class.x===this.x&&f.class.y===this.y){b.isMuted||i.play(),p[this.y][this.x].classList.remove("tile--food"),P({mode:"food"});const{x:e,y:s}=w[0],{x:t,y:a}=w[1],l=t-e,o=a-s,{newX:c,newY:r}=((e,s,t,a)=>{let l=t,o=a;return 0!==e?l=(t-e+y)%y:0!==s&&(o=(a-s+y)%y),p[o][l].classList.contains("tile--snake")&&D(),{newX:l,newY:o}})(l,o,e,s);f.class.length++,F({snakeLength:f.class.length}),$.style.color="#d1d122",w.unshift({x:c,y:r}),p[r][c].classList.add("tile--snake"),setTimeout((()=>{$.style.color="#000"}),300)}}},R=class extends W{handleTransformBonus=()=>{};handleIsEaten=()=>{}},P=({mode:e})=>{const s=document.querySelectorAll(".tile"),t=document.querySelectorAll(".tile:not(.tile--snake):not(.tile--boost)"),a=u({min:0,max:t.length-1}),l=Array.from(s).indexOf(t[a]),o={x:l%y,y:Math.floor(l/y)},{x:c,y:r}=o;switch(e){case"food":x.class=new T(c,r),p[x.class.y][x.class.x].classList.add("tile--food");break;case"bonus":let e=new R("bonus",c,r);v.push(e);break;default:console.error("#ERR! -> Przesłano niepoprawny typ bonusu")}},B=()=>{x.class.handleIsEaten();const{x:e,y:s}=w[0];p[f.class.y][f.class.x].classList.contains("tile--snake")?D():(p[s][e].classList.remove("tile--snake"),w.shift(),p[f.class.y][f.class.x].classList.add("tile--snake"),w.push({x:f.class.x,y:f.class.y}))},N=()=>{(()=>{switch(f.class.direction){case"W":f.class.y=0===f.class.y?y-1:f.class.y-1,B();break;case"S":f.class.y=f.class.y===y-1?0:f.class.y+1,B();break;case"A":f.class.x=0===f.class.x?y-1:f.class.x-1,B();break;case"D":f.class.x=f.class.x===y-1?0:f.class.x+1,B();break;default:console.error("#ERR: Nieprawidłowy kierunek!")}})(),f.class.jumps++,(()=>{if(f.class.jumps%(9*Math.floor(y/10))==0){f.class.speed=parseFloat((f.class.speed+.1).toFixed(2));let e=parseFloat((f.class.speed/10).toFixed(3)),s=f.class.speed%e;console.log(f.class.speed,e,s),!b.isMuted&&(f.class.speed<2||f.class.speed>=2&&0===Math.floor(f.class.speed%(f.class.speed/10)))&&n.play(),I.classList.add("parameter-speed--acceleration"),F({speed:f.class.speed.toFixed(2)}),setTimeout((()=>{I.classList.remove("parameter-speed--acceleration")}),1e3),M.val=750/(y/h.max)/4/f.class.speed,clearInterval(L.interval),L.set(setInterval(N,M.val))}})(),A.set(!0)},O=N,X=({key:e})=>{if("M"===e)return b.isMuted=!b.isMuted,void j.classList.toggle("sound--muted");"W"===e&&"S"===f.class.direction||"S"===e&&"W"===f.class.direction||"A"===e&&"D"===f.class.direction||"D"===e&&"A"===f.class.direction||(k.val||("S"===e&&(w.reverse(),f.set({attr:"y",payload:w[w.length-1].y})),f.class.direction=e,k.val=!0,b.isMuted||c.play(),M.val=750/(y/h.max)/4/f.class.speed,L.set(setInterval(O,M.val)),S.set(setInterval((()=>{b.isMuted||r.play(),g.time++,F({timer:g.time})}),1e3))),k.val&&A.state&&(A.set(!1),f.class.direction=e))};let Y;j.addEventListener("click",(()=>{b.isMuted=!b.isMuted,j.classList.toggle("sound--muted")})),z.forEach(((e,s)=>{e.addEventListener("mousedown",(()=>{e.classList.add("control--pressed")})),e.addEventListener("mouseup",(()=>{e.classList.remove("control--pressed"),X({key:["W","S","A","D"][s]})}))})),document.addEventListener("keydown",(e=>{switch(e.keyCode||e.key||e.keyIdentifier){case 87:case 38:z[0].classList.add("control--pressed");break;case 83:case 40:z[1].classList.add("control--pressed");break;case 65:case 37:z[2].classList.add("control--pressed");break;case 68:case 39:z[3].classList.add("control--pressed")}})),document.addEventListener("keyup",(e=>{let s=e.keyCode||e.key||e.keyIdentifier;switch(z.forEach((e=>e.classList.remove("control--pressed"))),s){case 87:case 38:Y="W";break;case 83:case 40:Y="S";break;case 65:case 37:Y="A";break;case 68:case 39:Y="D";break;case 77:Y="M";break;default:return}X({key:Y})})),document.addEventListener("DOMContentLoaded",(()=>{i.src=s,d.src=t,n.src=a,r.src=l,c.src=o,c.volume=.07,r.volume=.1,i.volue=.07,n.volume=.3,d.volume=.3;let e={x:u({min:Math.floor(y/2)-3,max:Math.floor(y/2)+3}),y:u({min:Math.floor(y/2)-1,max:Math.floor(y/2)+1})};f.set({payload:new m(null,Math.round(y/3),1,e.x,e.y)}),F({boardSize:y,speed:f.class.speed.toFixed(2),snakeLength:f.class.length}),(e=>{let s=0;for(let t=0;t<y;t++){let t=[];for(let a=0;a<y;a++){let a=document.createElement("div");a.classList.add("tile"),a.style.width=e.width-2+"px",a.style.height=e.height-2+"px",C.appendChild(a);const l=document.querySelectorAll(".tile");t.push(l[s]),s++}p.push(t)}})({width:C.clientWidth/y,height:C.clientHeight/y}),(()=>{for(let e=0;e<f.class.length;e++){let s={x:f.class.x,y:f.class.y+e};w.unshift({x:s.x,y:s.y}),p[f.class.y+e][f.class.x].classList.add("tile--snake")}})(),(()=>{let e=y/h.max*15;for(let s=0;s<e;s++)P({mode:"bonus"});console.log(v)})(),P({mode:"food"})}))})();
//# sourceMappingURL=bundle.9b3ba5c541cc82391c97.js.map