/*! For license information please see bundle.33255ad549bfe34a11d0.js.LICENSE.txt */
(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var s;e.g.importScripts&&(s=e.g.location+"");var t=e.g.document;if(!s&&t&&(t.currentScript&&(s=t.currentScript.src),!s)){var a=t.getElementsByTagName("script");a.length&&(s=a[a.length-1].src)}if(!s)throw new Error("Automatic publicPath is not supported in this browser");s=s.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=s})();const s=e.p+"assets/point.a41846ef811ebc769132d677a9d33a21.mp3",t=e.p+"assets/gameover.0242c96fc833693dc721ea75ebb2d1b4.wav",a=e.p+"assets/speed_acceleration.952b0801786b04a70a0133de0ce831a6.wav",o=e.p+"assets/jump.ae2de8e7e136703f362699ea22c8a8c5.wav",l=e.p+"assets/start.105e220c664c62490ce0c19c670010fc.wav",c=new Audio,i=new Audio,r=new Audio,n=new Audio,d=new Audio,m=new Audio,u=({min:e,max:s})=>(e=Math.ceil(e),s=Math.floor(s),Math.floor(Math.random()*(s-e+1))+e),p=class{constructor(e,s,t,a,o,l=0){this.direction=e,this.length=s,this.speed=t,this.x=a,this.y=o,this.jumps=l}},y=[],h={min:10,max:50};let b=(()=>{let e;for(;!e||e<h.min||e>h.max;){const s=prompt(`Podaj wielkość planszy (minimalna - ${h.min}, maksymalna - ${h.max}):`);e=parseInt(s),(!e||e<h.min||e>h.max)&&alert("Wprowadź poprawną wartość!")}return e})(),f={class:"",set:({payload:e,attr:s})=>{s?f.class[s]=e:f.class=e}},g={class:"",set:({payload:e,attr:s})=>{s?g.class[s]=e:g.class=e}},v={val:!1,set:e=>{v.val=e}};const x=[];let k={time:0,increment:()=>{k.time++}},w={isMuted:!1,toggle:()=>{w.isMuted=!w.isMuted}},M={val:0,set:e=>{M.val=e}},L={interval:"",set:e=>{L.interval=e}},S={interval:"",set:e=>{S.interval=e}},E={state:!1,set:e=>{E.state=e}};const I=document.querySelector("[data-parameter=time]"),A=document.querySelector("[data-parameter=board-size]"),D=document.querySelector("[data-parameter=speed]"),q=document.querySelector("[data-parameter=length]"),$=(document.querySelector("[data-direction=top]"),document.querySelector("[data-direction=bottom]"),document.querySelector("[data-direction=left]"),document.querySelector("[data-direction=right]"),document.querySelector(".gameboard")),z=document.querySelector(".sound"),P=document.querySelectorAll(".control"),F=({snakeLength:e,speed:s,timer:t,boardSize:a})=>{s&&(D.textContent=`${s}`),e&&(q.textContent=`${e}`),a&&(A.textContent=`Rozmiar planszy: ${a}x${a}`),t&&(I.textContent=`Czas gry: \n    ${Math.floor(t/60/60)<10?"0"+Math.floor(t/60/60):Math.floor(t/60/60)}:${Math.floor(t/60)%60<10?"0"+Math.floor(t/60)%60:Math.floor(t/60)%60}:${t%60<10?"0"+t%60:t%60}\n    `)},T=class{constructor(e,s,t=""){this.name=t,this.x=e,this.y=s}},C=()=>{f.class.length,f.class.jumps,Math.floor(k.time/60/60),Math.floor(k.time/60),k.time,clearInterval(S.interval),clearInterval(L.interval),w.isMuted||d.play()},j=class extends T{handleIsEaten=()=>{if(f.class.x===this.x&&f.class.y===this.y){w.isMuted||n.play(),y[this.y][this.x].classList.remove("tile--food"),Z({mode:"food"});const{x:e,y:s}=x[0],{x:t,y:a}=x[1],o=t-e,l=a-s,{newX:c,newY:i}=((e,s,t,a)=>{let o=t,l=a;return 0!==e?o=(t-e+b)%b:0!==s&&(l=(a-s+b)%b),y[l][o].classList.contains("tile--snake")&&C(),{newX:o,newY:l}})(o,l,e,s);f.class.length++,F({snakeLength:f.class.length}),q.style.color="#d1d122",x.unshift({x:c,y:i}),y[i][c].classList.add("tile--snake"),setTimeout((()=>{q.style.color="#000"}),300)}}},X=e.p+"assets/SPEED2X.a0b832dac35442350bb1bb4991ad026a.png",W=e.p+"assets/SPEED2X.6f08f0072702c6c59080b722c5f0dc75.wav",B=e.p+"assets/Freeze.b1c4bc1b6fb900ad64e0c38c0c7936fc.png",H=e.p+"assets/Freeze.aaa39c866733aa62071d1ff78902879d.mp3",N=e.p+"assets/Bombs.77406599539cf7a19113ed07321eb7fd.png",R=e.p+"assets/bombs.529b8944e83780d8ea9f3dbbdb60897f.wav",O=e.p+"assets/+5 points.ce2d94cfc6b2159165532daeb96a5333.wav",Y=e.p+"assets/-5 points.ec530168190110448115828c53954685.wav",_=e.p+"assets/+5 points.07303cf152a20326af798466984eb1bb.png",G=e.p+"assets/-5 points.870d2a49ad6d668e42239fd94a285a98.png",J={"SPEED 2X":{img:X,audio:W},"SPEED /2X":{img:X,audio:W},Freeze:{img:B,audio:H},Bombs:{img:N,audio:R},Nystagmus:{img:e.p+"assets/Nystagmus.3c7308038ea90a21aa7568a94fc117d7.png",audio:e.p+"assets/nystagmus.445799472810c8e69c180d7da2933ba0.wav"},"+5 points":{img:_,audio:O},"-5 points":{img:G,audio:Y}},K=[],Q=[{name:"SPEED 2X",probability:35},{name:"SPEED /2X",probability:25},{name:"Freeze",probability:50},{name:"Bombs",probability:20},{name:"Nystagmus",probability:5},{name:"+5 points",probability:40},{name:"-5 points",probability:45}],U=()=>{const e=K.find((e=>e.x===f.class.x&&e.y===f.class.y));if(e){K.filter((s=>s.bonusID!==e.bonusID));const s=y[e.y][e.x];return s.classList.remove("tile--boost"),s.style.backgroundImage="",clearInterval(K[e.bonusID].boostInterval),m.src=J[e.name].audio,m.play(),!!e}},V=class extends T{constructor(e,s,t,a,o,l){super(e,s,t),this.bonusID=a,this.imgPATH=o,this.audioPATH=l,this.boostInterval=setInterval(this.handleBonusTranslate,M.val*u({min:25,max:200})/100)}handleBonusTranslate=()=>{if(y[this.y][this.x].classList.remove("tile--boost"),y[this.y][this.x].style.backgroundImage="",this.y++,this.y==b)return clearInterval(this.boostInterval),void K.filter((e=>e!==this.bonusID));U()||(y[this.y][this.x].classList.add("tile--boost"),y[this.y][this.x].style.backgroundImage=`url('${J[this.name].img}')`)}},Z=({mode:e,bonus:s})=>{const t=document.querySelectorAll(".tile"),a=document.querySelectorAll(".tile:not(.tile--snake):not(.tile--boost):not(.tile--bomb)"),o=u({min:0,max:a.length-1}),l=Array.from(t).indexOf(a[o]),c={x:l%b,y:Math.floor(l/b)},{x:i,y:r}=c;switch(e){case"food":g.class=new j(i,r),y[g.class.y][g.class.x].classList.add("tile--food");break;case"bonus":let e;s&&(e=new V(i,0,s.name,K.length,s.imgPATH,s.audioPATH)),y[0][e.x].classList.add("tile--boost"),y[0][e.x].style.backgroundImage=`url('${J[s.name].img}')`,y[0][e.x].style.backgroundSize="cover",K.push(e);break;case"bomb":break;default:console.error("#ERR! -> Przesłano niepoprawny typ bonusu")}},ee=()=>{g.class.handleIsEaten();const{x:e,y:s}=x[0];y[f.class.y][f.class.x].classList.contains("tile--snake")?C():(y[s][e].classList.remove("tile--snake"),x.shift(),y[f.class.y][f.class.x].classList.add("tile--snake"),x.push({x:f.class.x,y:f.class.y}))},se=()=>{Math.random()<1&&0===K.length&&(()=>{const e=u({min:0,max:100}),s=[...Q.filter((s=>s.probability>e))];for(const e of s)Z({mode:"bonus",bonus:e})})(),(()=>{switch(f.class.direction){case"W":f.class.y=0===f.class.y?b-1:f.class.y-1,ee();break;case"S":f.class.y=f.class.y===b-1?0:f.class.y+1,ee();break;case"A":f.class.x=0===f.class.x?b-1:f.class.x-1,ee();break;case"D":f.class.x=f.class.x===b-1?0:f.class.x+1,ee();break;default:console.error("#ERR: Nieprawidłowy kierunek!")}})(),f.class.jumps++,U(),(()=>{if(f.class.jumps%(9*Math.floor(b/10))==0){f.class.speed=parseFloat((f.class.speed+.1).toFixed(2));let e=parseFloat((f.class.speed/10).toFixed(3)),s=f.class.speed%e;console.log(f.class.speed,e,s),!w.isMuted&&(f.class.speed<2||f.class.speed>=2&&0===Math.floor(f.class.speed%(f.class.speed/10)))&&r.play(),D.classList.add("parameter-speed--acceleration"),F({speed:f.class.speed.toFixed(2)}),setTimeout((()=>{D.classList.remove("parameter-speed--acceleration")}),1e3),M.val=750/(b/h.max)/4/f.class.speed,clearInterval(L.interval),L.set(setInterval(se,M.val))}})(),E.set(!0)},te=se,ae=({key:e})=>{if("M"===e)return w.isMuted=!w.isMuted,void z.classList.toggle("sound--muted");"W"===e&&"S"===f.class.direction||"S"===e&&"W"===f.class.direction||"A"===e&&"D"===f.class.direction||"D"===e&&"A"===f.class.direction||(v.val||("S"===e&&(x.reverse(),f.set({attr:"y",payload:x[x.length-1].y})),f.class.direction=e,v.val=!0,w.isMuted||c.play(),M.val=750/(b/h.max)/4/f.class.speed,L.set(setInterval(te,M.val)),S.set(setInterval((()=>{w.isMuted||i.play(),k.time++,F({timer:k.time})}),1e3))),v.val&&E.state&&(E.set(!1),f.class.direction=e))};let oe;z.addEventListener("click",(()=>{w.isMuted=!w.isMuted,z.classList.toggle("sound--muted")})),P.forEach(((e,s)=>{e.addEventListener("mousedown",(()=>{e.classList.add("control--pressed")})),e.addEventListener("mouseup",(()=>{e.classList.remove("control--pressed"),ae({key:["W","S","A","D"][s]})}))})),document.addEventListener("keydown",(e=>{switch(e.keyCode||e.key||e.keyIdentifier){case 87:case 38:P[0].classList.add("control--pressed");break;case 83:case 40:P[1].classList.add("control--pressed");break;case 65:case 37:P[2].classList.add("control--pressed");break;case 68:case 39:P[3].classList.add("control--pressed")}})),document.addEventListener("keyup",(e=>{let s=e.keyCode||e.key||e.keyIdentifier;switch(P.forEach((e=>e.classList.remove("control--pressed"))),s){case 87:case 38:oe="W";break;case 83:case 40:oe="S";break;case 65:case 37:oe="A";break;case 68:case 39:oe="D";break;case 77:oe="M";break;default:return}ae({key:oe})})),document.addEventListener("DOMContentLoaded",(()=>{n.src=s,d.src=t,r.src=a,i.src=o,c.src=l,c.volume=.07,i.volume=.1,n.volue=.07,r.volume=.3,d.volume=.3,m.volume=.3;let e={x:u({min:Math.floor(b/2)-3,max:Math.floor(b/2)+3}),y:u({min:Math.floor(b/2)-1,max:Math.floor(b/2)+1})};f.set({payload:new p(null,Math.round(b/3),1,e.x,e.y)}),F({boardSize:b,speed:f.class.speed.toFixed(2),snakeLength:f.class.length}),(e=>{let s=0;for(let t=0;t<b;t++){let t=[];for(let a=0;a<b;a++){let a=document.createElement("div");a.classList.add("tile"),a.style.width=e.width-2+"px",a.style.height=e.height-2+"px",$.appendChild(a);const o=document.querySelectorAll(".tile");t.push(o[s]),s++}y.push(t)}})({width:$.clientWidth/b,height:$.clientHeight/b}),(()=>{for(let e=0;e<f.class.length;e++){let s={x:f.class.x,y:f.class.y+e};x.unshift({x:s.x,y:s.y}),y[f.class.y+e][f.class.x].classList.add("tile--snake")}})(),Z({mode:"food"})}))})();
//# sourceMappingURL=bundle.33255ad549bfe34a11d0.js.map