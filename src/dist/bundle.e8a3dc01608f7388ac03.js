/*! For license information please see bundle.e8a3dc01608f7388ac03.js.LICENSE.txt */
(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var s=e.g.document;if(!t&&s&&(s.currentScript&&(t=s.currentScript.src),!t)){var a=s.getElementsByTagName("script");if(a.length)for(var o=a.length-1;o>-1&&!t;)t=a[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=document.querySelector(":root"),s=getComputedStyle(t),a={"--board-color":s.getPropertyValue("--board-color"),"--snake-color":s.getPropertyValue("--snake-color"),"--tile-color":s.getPropertyValue("--tile-color"),"--background":s.getPropertyValue("--background"),"--food-color":s.getPropertyValue("--food-color"),"--text-color":s.getPropertyValue("--text-color")};let o={boardColor:localStorage.getItem("board-theme")||a["--board-color"],snakeColor:localStorage.getItem("snake-color")||a["--snake-color"],tileColor:localStorage.getItem("tile-color")||a["--tile-color"],foodColor:localStorage.getItem("food-color")||a["--food-color"],background:localStorage.getItem("background")||a["--background"]};const l=class{constructor(e){this.board=e,t.style.setProperty("--board-color",this.board.boardColor),t.style.setProperty("--text-color",this.board.textColor),t.style.setProperty("--snake-color",this.board.snakeColor),t.style.setProperty("--background",this.board.background),t.style.setProperty("--food-color",this.board.foodColor),t.style.setProperty("--tile-color",this.board.tileColor)}handlePickTheme=({theme:e})=>{const{textColor:s,boardColor:a,tileColor:o,background:l,foodColor:r,snakeColor:n}=e;t.style.setProperty("--board-color",a),t.style.setProperty("--text-color",s),t.style.setProperty("--snake-color",n),t.style.setProperty("--background",l),t.style.setProperty("--food-color",r),t.style.setProperty("--tile-color",o),localStorage.setItem("--board-color",a),localStorage.setItem("--text-color",s),localStorage.setItem("--snake-color",n),localStorage.setItem("--background",l),localStorage.setItem("--food-color",r),localStorage.setItem("--tile-color",o)};handleNystagmus=()=>{let e,s=!1;e=setInterval((()=>{s=!s,t.style.setProperty("--tile-color",s?"#fff":"#000"),t.style.setProperty("--snake-color",s?"#000":"#fff"),t.style.setProperty("--food-color",s?"#f00":"#00f")}),50),setTimeout((()=>{t.style.setProperty("--snake-color",this.board.snakeColor),t.style.setProperty("--tile-color",this.board.tileColor),t.style.setProperty("--food-color",this.board.foodColor),clearInterval(e)}),4e3)}},r=e.p+"assets/point.mp3",n=e.p+"assets/gameover.wav",i=e.p+"assets/speed_acceleration.wav",c=e.p+"assets/jump.wav",d=e.p+"assets/start.wav",m=e.p+"assets/explosion.wav",u=({min:e,max:t})=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e),p=()=>{let e;for(;!e||e<y.min||e>y.max;){const t=prompt(`Podaj wielkość planszy (minimalna - ${y.min}, maksymalna - ${y.max}):`);e=parseInt(t),(!e||e<y.min||e>y.max)&&alert("Wprowadź poprawną wartość!")}return e},h=[],y={min:10,max:40};let b=p(),g={class:"",set:({payload:e,attr:t})=>{t?g.class[t]=e:g.class=e}},f={class:"",set:({payload:e,attr:t})=>{t?f.class[t]=e:f.class=e}},v={val:!1,set:e=>{v.val=e}};const k=[];let x={time:0,increment:()=>{x.time++},set:({payload:e})=>{x.time=e}},L={isMuted:!1,toggle:()=>{L.isMuted=!L.isMuted}},S={val:0,set:e=>{S.val=e}},w={interval:"",set:e=>{w.interval=e}},C={interval:"",set:e=>{C.interval=e}},I={state:!1,set:e=>{I.state=e}};const E=class{constructor(e,t,s=""){this.name=s,this.x=e,this.y=t}},P=document.querySelector("[data-parameter=time]"),M=document.querySelector("[data-parameter=board-size]"),z=document.querySelector("[data-parameter=speed]"),A=document.querySelector("[data-parameter=length]"),q=(document.querySelector("[data-direction=top]"),document.querySelector("[data-direction=bottom]"),document.querySelector("[data-direction=left]"),document.querySelector("[data-direction=right]"),document.querySelector(".gameboard")),T=document.querySelector(".sound"),$=document.querySelectorAll(".control"),D=({snakeLength:e,speed:t,timer:s,boardSize:a})=>{t&&(z.textContent=`${t}`),e&&(A.textContent=`${e}`),a&&(M.textContent=`Rozmiar planszy: ${a}x${a}`),s&&(P.textContent=`Czas gry: \n    ${Math.floor(s/60/60)<10?"0"+Math.floor(s/60/60):Math.floor(s/60/60)}:${Math.floor(s/60)%60<10?"0"+Math.floor(s/60)%60:Math.floor(s/60)%60}:${s%60<10?"0"+s%60:s%60}\n    `)},B=[];let F={state:!0,toggle:()=>{F.state=!F.state}},N={val:"",set:({payload:e})=>{N.val=e}};const R=document.querySelector(".game-over"),X=document.querySelector(".container"),H=document.querySelector("[data-points]"),W=document.querySelector("[data-speed]"),j=document.querySelector("[data-length]"),U=document.querySelector("[data-boardSize]"),V=document.querySelector("[data-timer]"),Y=document.querySelector("[data-username-input]"),O=(document.querySelector("[data-message-input]"),document.querySelector(".play-again")),_=document.querySelector(".pencil"),G=document.querySelector(".gameover-form"),J=[{username:"Bartosz Moszczyński",message:"lorem ipsum dolor sit amet consectetur adipiscing elit sed diam nonumy euismod tempor",imgURL:"https://tiny.pl/wzmff",statistics:{points:68400,speed:1,boardSize:20,length:40,time:{hours:0,minutes:2,seconds:36}},published:{year:2023,month:5,day:1}},{username:"Bartosz Moszczyński",message:"lorem ipsum dolor sit amet",imgURL:"https://tiny.pl/wzmff",statistics:{points:65400,speed:3,boardSize:40,length:60,time:{hours:0,minutes:3,seconds:24}},published:{year:2023,month:4,day:29}},{username:"Bartosz Moszczyński",message:"lorem ipsum dolor sit amet",imgURL:"https://tiny.pl/wzmff",statistics:{points:62400,speed:2,boardSize:20,length:40,time:{hours:0,minutes:3,seconds:24}},published:{year:2023,month:5,day:2}},{username:"Hu Tao",message:'"Hu" as in: "Who put me in this coffin?", and Tao as in: "I cant get TAOt!" :D',imgURL:"https://wallpapercave.com/wp/wp11693252.jpg",statistics:{points:62400,speed:2,boardSize:20,length:40,time:{hours:0,minutes:3,seconds:24}},published:{year:2023,month:5,day:2}}],K=document.querySelector(".leaderboard-top"),Q=(e,t)=>{const{username:s,message:a,imgURL:o,statistics:l}=t,{time:r}=l,{hours:n,minutes:i,seconds:c}=r,{points:d,speed:m,boardSize:u}=l,p=document.createElement("div");p.classList.add("leaderboard-record");const h=document.createElement("div");h.classList.add("leaderboard-record-trophy");const y=document.createElement("img");y.classList.add("leaderboard-trophy-img");const b=document.createElement("div");b.classList.add("leaderboard-position");const g=document.createElement("div");g.classList.add("leaderboard-info");const f=document.createElement("div");f.classList.add("leaderboard-profile");const v=document.createElement("img");v.classList.add("leaderboard-profile-img");const k=document.createElement("div");k.classList.add("leaderboard-username");const x=document.createElement("div");x.classList.add("leaderboard-message");const L=document.createElement("i");L.classList.add("fa-regular"),L.classList.add("fa-message");const S=document.createElement("h5");S.classList.add("leaderboard-message-content");const w=document.createElement("div");w.classList.add("leaderboard-statistics");const C=[],I=["fa-solid fa-star statistic-icon","fa-solid fa-gauge-high statistic-icon","fa-solid fa-maximize statistic-icon","fa-solid fa-clock statistic-icon"];for(let e=0;e<4;e++){const t=document.createElement("div");t.classList.add("leaderboard-statistic");const s=document.createElement("i");[...I[e].split(" ")].map((e=>{s.classList.add(e)}));const a=document.createElement("span");switch(e){case 0:a.textContent=d;break;case 1:a.textContent=m.toFixed(2);break;case 2:a.textContent=u;break;case 3:a.textContent=`${n>10?n:"0"+n}:${i>10?i:"0"+i}:${c>10?c:"0"+payload.time.seconds}`}a.classList.add("statistic-span"),t.appendChild(s),t.appendChild(a),C.push(t)}switch(k.textContent=s,""!==a&&(S.textContent=a),C.map((e=>w.appendChild(e))),x.appendChild(L),x.appendChild(S),""===a&&(x.style.display="none"),f.appendChild(v),f.appendChild(k),g.appendChild(f),g.appendChild(x),g.appendChild(w),h.appendChild(y),h.appendChild(b),p.appendChild(h),p.appendChild(g),console.log(p),v.src=o,e>2&&(b.textContent=e+1),e){case 0:y.src="./assets/1st-place.png";break;case 1:y.src="./assets/2nd-place.png";break;case 2:y.src="./assets/3rd-place.png";break;default:y.src="./assets/star.png"}return p.style=`--record-animation-delay: ${.1*e}s`,p},Z=e=>{e.preventDefault()},ee=()=>{R.style.display="none",X.style.display="none",document.querySelectorAll(".tile").forEach((e=>e.remove()));let e=k.length;for(let t=0;t<e;t++)k.shift();for(let e=0;e<b;e++)h.pop();let t=we.length;for(let e=0;e<t;e++)clearInterval(we[0].boostInterval),we.shift();clearInterval(N.val),N.val="";let s=B.length;for(let e=0;e<s;e++)clearInterval(B[0].bombInterval),B.shift();O.removeEventListener("click",ee),_.removeEventListener("click",te),b=p(),$e()},te=()=>{Y.focus()},se=()=>{R.style.display="flex",X.style.display="flex",clearInterval(C.interval),clearInterval(w.interval),v.val=!1;const{speed:e,length:t}=g.class,s={totalPoints:Math.round(t*e*b*15),speed:e,boardSize:b,length:t,time:{hours:Math.floor(x.time/60/60),minutes:Math.floor(x.time/60)%60,seconds:x.time%60}};H.textContent=`${s.totalPoints} Punkty`,W.textContent=`${s.speed.toFixed(2)} Prędkość`,j.textContent=`${s.length} Długość`,U.textContent=`${s.boardSize}x${s.boardSize} Rozmiar`,V.textContent=`${s.time.hours>10?s.time.hours:"0"+s.time.hours}:${s.time.minutes>10?s.time.minutes:"0"+s.time.minutes}:${s.time.seconds>10?s.time.seconds:"0"+s.time.seconds} Czas gry`,O.addEventListener("click",ee),_.addEventListener("click",te),G.addEventListener("submit",Z),setTimeout((()=>{navigator.vibrate([200,100,300])}),150),L.isMuted||ze.play()},ae=()=>{const{x:e,y:t}=k[0],{x:s,y:a}=k[1]?k[1]:{x:void 0,y:void 0};if(!s||!a){let s={x:0,y:0};switch(g.class.direction){case"W":s.x=e,s.y=t+1;break;case"S":s.x=e,s.y=t-1;break;case"A":s.x=e+1,s.y=t;break;case"D":s.x=e-1,s.y=t}return{newX:s.x,newY:s.y}}return((e,t,s,a)=>{let o=s,l=a;return 0!==e?o=(s-e+b)%b:0!==t&&(l=(a-t+b)%b),h[l][o].classList.contains("tile--snake")?(se(),{newX:o,newY:l}):{newX:o,newY:l}})(s-e,a-t,e,t)},oe=class extends E{handleIsEaten=()=>{if(g.class.x===this.x&&g.class.y===this.y){L.isMuted||Me.play(),h[this.y][this.x].classList.remove("tile--food"),de({mode:"food"});const{newX:e,newY:t}=ae();if(!v.val)return;let s=k.length;const{x:a,y:o}=k[0],l=h[o][a]?h[o][a]:void 0;if(l)if(l.classList.contains("tile--snake-added-point"))for(let e=0;e<s;e++){const{x:t,y:s}=k[e];h[s][t].classList.remove("tile--snake-added-point")}else if(l.classList.contains("tile--snake-subtracted-point"))for(let e=0;e<s;e++){const{x:e,y:t}=k[0],s=h[t][e];if(!s.classList.contains("tile--snake-subtracted-point"))break;s.classList.remove("tile--snake-subtracted-point"),s.classList.remove("tile--snake"),k.shift(),g.class.length--}g.class.length++,D({snakeLength:g.class.length}),A.style.color="#d1d122",k.unshift({x:e,y:t}),h[t][e].classList.add("tile--snake"),setTimeout((()=>{A.style.color="#000"}),300)}}};let le={class:"",set:({payload:e,attr:t})=>{t?le.class[t]=e:le.class=e}};const re=le,ne=({type:e})=>{let s;switch(e){case"Nystagmus":re.class.handleNystagmus();break;case"+5 points":setTimeout((()=>{for(let e=0;e<k.length;e++){let{x:t,y:s}=k[e];if(!h[s][t].classList.contains("tile--snake-added-point"))break;h[s][t].classList.remove("tile--snake-added-point")}}),500),s=k.length;for(let e=0;e<s;e++){const{x:e,y:t}=k[0],s=h[t][e];if(!s.classList.contains("tile--snake-subtracted-point"))break;s.classList.remove("tile--snake-subtracted-point"),s.classList.remove("tile--snake"),k.shift(),g.class.length--}for(let e=0;e<5;e++){const e=ae();if(!v.val)return;if(e){const{newX:t,newY:s}=e;g.class.length++,D({snakeLength:g.class.length}),k.unshift({x:t,y:s}),h[s][t].classList.add("tile--snake"),h[s][t].classList.add("tile--snake-added-point")}}break;case"-5 points":setTimeout((()=>{let e=k.length;for(let t=0;t<e;t++){const{x:e,y:t}=k[0],s=h[t][e];if(!s.classList.contains("tile--snake-subtracted-point"))break;s.classList.remove("tile--snake-subtracted-point"),s.classList.remove("tile--snake"),k.shift(),g.class.length--,D({snakeLength:g.class.length})}}),500);for(let e=0;e<5;e++){const{x:t,y:s}=k[e];if(h[s][t].classList.contains("tile--snake-added-point"))h[s][t].classList.remove("tile--snake-added-point"),h[s][t].classList.add("tile--snake-subtracted-point");else{if(e===k.length-1)break;h[s][t].classList.add("tile--snake-subtracted-point")}}break;case"Bombs":navigator.vibrate(100),""===N.val&&N.set({payload:setInterval((()=>{F.toggle(),console.log("interval"),t.style.setProperty("--bomb-color",F.state?"#000":"#f00")}),250)});for(let e=0;e<Math.floor(.4*b);e++)de({mode:"bomb"});break;default:console.error("#ERR -> Nieznany typ bonusu!")}},ie=class extends E{constructor(e,t,s,a,o,l){super(e,t,s),this.bonusID=a,this.imgPATH=o,this.audioPATH=l;const r=S.val*u({min:10,max:200})/100;this.boostInterval=setInterval(this.handleBonusTranslate,r)}handleBonusTranslate=()=>{if(v.val)if(h[this.y][this.x].classList.remove("tile--boost"),h[this.y][this.x].style.backgroundImage="",this.y++,this.x!==g.class.x||this.y!==g.class.y){if(this.y===b){const e=we.findIndex((e=>e.bonusID===this.bonusID));return clearInterval(this.boostInterval),void we.splice(e,1)}h[this.y][this.x].classList.add("tile--boost"),h[this.y][this.x].style.backgroundImage=`url('${Se[this.name].img}')`}else{clearInterval(this.boostInterval),console.log("eaten -> bonus ate snake");const e=we.findIndex((e=>e.bonusID===this.bonusID));if(we.splice(e,1),ne({type:this.name}),!L.isMuted){const e=new Audio;e.src=this.audioPATH,e.play()}}else clearInterval(this.boostInterval)}},ce=class extends E{constructor(e,t){super(e,t),this.bombId=B.length,B.push(this);const s=u({min:50,max:250});this.bombInterval=setInterval(this.handleBombTranslate,s)}handleBombTranslate=()=>{if(v.val){if(h[this.y][this.x].classList.remove("tile--bomb"),0===this.x){clearInterval(this.bombInterval);const e=B.findIndex((e=>e.bombId===this.bombId));return console.log(B),B.splice(e,1),console.log(B),void(0===B.length&&(clearInterval(N.val),N.set({payload:""})))}this.x--,h[this.y][this.x].classList.add("tile--bomb"),this.handleBombCollide()}else clearInterval(this.bombInterval)};handleBombCollide=()=>{if(this.x===g.class.x&&this.y===g.class.y)return L.isMuted||qe.play(),h[this.y][this.x].classList.remove("tile--bomb"),clearInterval(this.bombInterval),void se()}},de=({mode:e,bonus:t})=>{if("bonus"===e){let e;t&&(e=new ie(0,0,t.name,we.length,t.imgPATH,t.audioPATH));const s=[];if(h[0].forEach(((e,t)=>{e.classList.contains("tile--boost")||s.push(t)})),0===s.length)return;let a=u({min:0,max:s.length-1});return h[0][s[a]].classList.add("tile--boost"),h[0][s[a]].style.backgroundImage=`url('${e.imgPATH}')`,e.x=s[a],void we.push(e)}const s=document.querySelectorAll(".tile"),a=document.querySelectorAll(".tile:not(.tile--snake)");if(0===a.length)return void se();const o=u({min:0,max:a.length-1}),l=Array.from(s).indexOf(a[o]),r={x:l%b,y:Math.floor(l/b)},{x:n,y:i}=r;switch(e){case"food":f.class=new oe(n,i),h[f.class.y][f.class.x].classList.add("tile--food");break;case"bomb":let e=u({min:0,max:b-1});h[e][b-1].classList.add("tile--bomb"),new ce(b-1,e);break;default:console.error("#ERR! -> Przesłano niepoprawny typ bonusu")}},me=e.p+"assets/SPEED2X.png",ue=e.p+"assets/SPEED2X.wav",pe=e.p+"assets/SPEED 2Xlower.png",he=e.p+"assets/SPEED 2Xlower.wav",ye=e.p+"assets/Freeze.png",be=e.p+"assets/Freeze.mp3",ge=e.p+"assets/Bombs.png",fe=e.p+"assets/bombs.wav",ve=e.p+"assets/+5 points.wav",ke=e.p+"assets/-5 points.wav",xe=e.p+"assets/+5 points.png",Le=e.p+"assets/-5 points.png",Se={"SPEED 2X":{img:me,audio:ue},"SPEED /2X":{img:pe,audio:he},Freeze:{img:ye,audio:be},Bombs:{img:ge,audio:fe},Nystagmus:{img:e.p+"assets/Nystagmus.png",audio:e.p+"assets/nystagmus.wav"},"+5 points":{img:xe,audio:ve},"-5 points":{img:Le,audio:ke}},we=[],Ce=[{name:"SPEED 2X",probability:100},{name:"SPEED /2X",probability:100},{name:"Freeze",probability:100},{name:"Bombs",probability:100},{name:"Nystagmus",probability:100},{name:"+5 points",probability:100},{name:"-5 points",probability:100}],Ie=new Audio,Ee=new Audio,Pe=new Audio,Me=new Audio,ze=new Audio,Ae=new Audio,qe=new Audio,Te=class{constructor(e,t,s,a,o,l=0){this.direction=e,this.length=t,this.speed=s,this.x=a,this.y=o,this.jumps=l}},$e=()=>{Me.src=r,ze.src=n,Pe.src=i,Ee.src=c,Ie.src=d,qe.src=m,qe.volume=1,Ie.volume=.07,Ee.volume=.1,Me.volue=.07,Pe.volume=.3,ze.volume=.3,Ae.volume=.1;let e={x:u({min:Math.floor(b/2)-3,max:Math.floor(b/2)+3}),y:u({min:Math.floor(b/2)-1,max:Math.floor(b/2)+1})};g.set({payload:new Te(null,Math.round(b/3),1,e.x,e.y)}),x.set({payload:0}),D({boardSize:b,speed:g.class.speed.toFixed(2),snakeLength:g.class.length,timer:`${x.time}`}),(e=>{let t=0;for(let s=0;s<b;s++){let s=[];for(let a=0;a<b;a++){let a=document.createElement("div");a.classList.add("tile"),a.style.width=e.width-2+"px",a.style.height=e.height-2+"px",q.appendChild(a);const o=document.querySelectorAll(".tile");s.push(o[t]),t++}h.push(s)}})({width:q.clientWidth/b,height:q.clientHeight/b}),(()=>{for(let e=0;e<g.class.length;e++){let t={x:g.class.x,y:g.class.y+e};k.unshift({x:t.x,y:t.y}),h[g.class.y+e][g.class.x].classList.add("tile--snake")}})(),de({mode:"food"})},De=()=>{f.class.handleIsEaten(),(()=>{let e;if(we.map(((t,s)=>{t.x===g.class.x&&t.y===g.class.y&&(e={bonus:t,index:s})})),e){const{bonus:t,index:s}=e;clearInterval(we[s].boostInterval),console.log("eaten -> snake ate bonus");const a=h[t.y][t.x];if(a.classList.remove("tile--boost"),a.style.backgroundImage="",we.splice(s,1),ne({type:t.name}),!L.isMuted){const e=new Audio;e.src=t.audioPATH,e.play()}}})();for(const e of B)e.handleBombCollide();if(!v.val)return;const{x:e,y:t}=k[0];if(h[g.class.y][g.class.x].classList.contains("tile--snake"))return void se();const s=h[t][e]?h[t][e]:void 0;if(s)if(s.classList.contains("tile--snake-added-point")){for(let e=0;e<k.length;e++){const{x:t,y:s}=k[e],a=h[s][t];if(!a.classList.contains("tile--snake-added-point")){a.classList.add("tile--snake-added-point");break}}s.classList.remove("tile--snake-added-point")}else if(s.classList.contains("tile--snake-subtracted-point")){for(let e=0;e<k.length;e++){const{x:t,y:s}=k[e],a=h[s][t];if(!a.classList.contains("tile--snake-subtracted-point")){a.classList.add("tile--snake-subtracted-point");break}}s.classList.remove("tile--snake-subtracted-point")}h[t][e].classList.remove("tile--snake"),k.shift(),h[g.class.y][g.class.x].classList.add("tile--snake"),k.push({x:g.class.x,y:g.class.y})},Be=()=>{Math.random()<1&&0===we.length&&(()=>{const e=u({min:0,max:100}),t=[...Ce.filter((t=>t.probability>=e))];for(const e of t)de({mode:"bonus",bonus:{name:e.name,imgPATH:Se[e.name].img,audioPATH:Se[e.name].audio}})})(),(()=>{switch(g.class.direction){case"W":g.class.y=0===g.class.y?b-1:g.class.y-1,De();break;case"S":g.class.y=g.class.y===b-1?0:g.class.y+1,De();break;case"A":g.class.x=0===g.class.x?b-1:g.class.x-1,De();break;case"D":g.class.x=g.class.x===b-1?0:g.class.x+1,De();break;default:console.error("#ERR: Nieprawidłowy kierunek!")}})(),v.val&&(g.class.jumps++,(()=>{if(g.class.jumps%(9*Math.floor(b/10))==0){g.class.speed=parseFloat((g.class.speed+.1).toFixed(2));let e=parseFloat((g.class.speed/10).toFixed(3)),t=g.class.speed%e;console.log(g.class.speed,e,t),!L.isMuted&&(g.class.speed<2||g.class.speed>=2&&0===Math.floor(g.class.speed%(g.class.speed/10)))&&Pe.play(),z.classList.add("parameter-speed--acceleration"),D({speed:g.class.speed.toFixed(2)}),setTimeout((()=>{z.classList.remove("parameter-speed--acceleration")}),1e3),S.val=750/(b/y.max)/4/g.class.speed,clearInterval(w.interval),w.set(setInterval(Be,S.val))}})(),I.set(!0))},Fe=Be,Ne=({key:e})=>{if("M"===e)return L.isMuted=!L.isMuted,void T.classList.toggle("sound--muted");"W"===e&&"S"===g.class.direction||"S"===e&&"W"===g.class.direction||"A"===e&&"D"===g.class.direction||"D"===e&&"A"===g.class.direction||(v.val||0!==g.class.jumps||("S"===e&&(k.reverse(),g.set({attr:"y",payload:k[k.length-1].y})),g.class.direction=e,v.val=!0,L.isMuted||Ie.play(),S.val=750/(b/y.max)/4/g.class.speed,w.set(setInterval(Fe,S.val)),C.set(setInterval((()=>{L.isMuted||Ee.play(),x.increment(),D({timer:x.time})}),1e3))),v.val&&I.state&&(I.set(!1),g.class.direction=e))},Re=e.p+"assets/1st-place.png";let Xe;T.addEventListener("click",(()=>{L.isMuted=!L.isMuted,T.classList.toggle("sound--muted")})),$.forEach(((e,t)=>{e.addEventListener("touchstart",(()=>{e.classList.add("control--pressed")})),e.addEventListener("touchend",(()=>{e.classList.remove("control--pressed"),Ne({key:["W","S","A","D"][t]})})),e.addEventListener("mousedown",(()=>{e.classList.add("control--pressed")})),e.addEventListener("mouseup",(()=>{e.classList.remove("control--pressed"),Ne({key:["W","S","A","D"][t]})}))})),document.addEventListener("keydown",(e=>{if("INPUT"!==document.activeElement.tagName)switch(e.keyCode||e.key||e.keyIdentifier){case 87:case 38:$[0].classList.add("control--pressed");break;case 83:case 40:$[1].classList.add("control--pressed");break;case 65:case 37:$[2].classList.add("control--pressed");break;case 68:case 39:$[3].classList.add("control--pressed")}})),document.addEventListener("keyup",(e=>{if("INPUT"===document.activeElement.tagName)return;let t=e.keyCode||e.key||e.keyIdentifier;switch($.forEach((e=>e.classList.remove("control--pressed"))),t){case 87:case 38:Xe="W";break;case 83:case 40:Xe="S";break;case 65:case 37:Xe="A";break;case 68:case 39:Xe="D";break;case 77:Xe="M";break;default:return}Ne({key:Xe})}));const He=document.querySelector("[data-trophy]");document.addEventListener("DOMContentLoaded",(()=>{(({from:e,to:t})=>{for(const[e,t]of J.entries()){const s=Q(e,t);K.appendChild(s)}})({from:0}),He.src=Re,re.set({payload:new l({boardColor:o.boardColor,textColor:o.textColor,tileColor:o.tileColor,foodColor:o.foodColor,background:o.background,snakeColor:o.snakeColor})}),$e()}))})();
//# sourceMappingURL=bundle.e8a3dc01608f7388ac03.js.map