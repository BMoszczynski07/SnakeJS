/*! For license information please see bundle.94f9ab34ed9be54403cd.js.LICENSE.txt */
(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var s=e.g.document;if(!t&&s&&(s.currentScript&&(t=s.currentScript.src),!t)){var a=s.getElementsByTagName("script");a.length&&(t=a[a.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=e.p+"assets/point.a41846ef811ebc769132d677a9d33a21.mp3",s=e.p+"assets/gameover.0242c96fc833693dc721ea75ebb2d1b4.wav",a=e.p+"assets/speed_acceleration.952b0801786b04a70a0133de0ce831a6.wav",l=e.p+"assets/jump.ae2de8e7e136703f362699ea22c8a8c5.wav",o=e.p+"assets/start.105e220c664c62490ce0c19c670010fc.wav",c=new Audio,r=new Audio,n=new Audio,i=new Audio,d=new Audio,u=({min:e,max:t})=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e),m=class{constructor(e,t,s,a,l,o=0){this.direction=e,this.length=t,this.speed=s,this.x=a,this.y=l,this.jumps=o}},p=[],h={min:10,max:50};let y=(()=>{let e;for(;!e||e<h.min||e>h.max;){const t=prompt(`Podaj wielkość planszy (minimalna - ${h.min}, maksymalna - ${h.max}):`);e=parseInt(t),(!e||e<h.min||e>h.max)&&alert("Wprowadź poprawną wartość!")}return e})(),f={class:"",set:({payload:e,attr:t})=>{t?f.class[t]=e:f.class=e}},v={class:"",set:({payload:e,attr:t})=>{t?v.class[t]=e:v.class=e}};const x=[];let g={val:!1,set:e=>{g.val=e}};const k=[];let w={time:0,increment:()=>{w.time++}},b={isMuted:!1,toggle:()=>{b.isMuted=!b.isMuted}},M={val:0,set:e=>{M.val=e}},L={interval:"",set:e=>{L.interval=e}},S={interval:"",set:e=>{S.interval=e}},A={state:!1,toggle:()=>{A.state=!A.state}};const E=document.querySelector("[data-parameter=time]"),q=document.querySelector("[data-parameter=board-size]"),I=document.querySelector("[data-parameter=speed]"),$=document.querySelector("[data-parameter=length]"),C=(document.querySelector("[data-direction=top]"),document.querySelector("[data-direction=bottom]"),document.querySelector("[data-direction=left]"),document.querySelector("[data-direction=right]"),document.querySelector(".gameboard")),j=document.querySelector(".sound"),z=document.querySelectorAll(".control"),D=({snakeLength:e,speed:t,timer:s,boardSize:a})=>{t&&(I.textContent=`${t}`),e&&($.textContent=`Długość: ${e}`),a&&(q.textContent=`Rozmiar planszy: ${a}x${a}`),s&&(E.textContent=`Czas gry: \n    ${Math.floor(s/60/60)<10?"0"+Math.floor(s/60/60):Math.floor(s/60/60)}:${Math.floor(s/60)%60<10?"0"+Math.floor(s/60)%60:Math.floor(s/60)%60}:${s%60<10?"0"+s%60:s%60}\n    `)},W=class{constructor(e,t,s=""){this.name=s,this.x=e,this.y=t}},T=()=>{snake.length,snake.jumps,Math.floor(timer/60/60),Math.floor(timer/60),timer,clearInterval(timerInterval),clearInterval(gameInterval),mute||gameOver.play()},R=class extends W{handleIsEaten=()=>{if(f.class.x===this.x&&f.class.y===this.y){mute.isMuted||i.play(),p[this.y][this.x].classList.remove("tile--food"),O({mode:"food"});const{x:e,y:t}=k[0],{x:s,y:a}=k[1],l=s-e,o=a-t,{newX:c,newY:r}=((e,t,s,a)=>{let l=s,o=a;return 0!==e?l=(s-e+y)%y:0!==t&&(o=(a-t+y)%y),p[o][l].classList.contains("tile--snake")&&T(),{newX:l,newY:o}})(l,o,e,t);f.class.length++,$.textContent=f.length,$.style.color="#d1d122",k.unshift({x:c,y:r}),p[r][c].classList.add("tile--snake"),setTimeout((()=>{$.style.color="#000"}),300)}}},F=class extends W{handleTransformBonus=()=>{};handleIsEaten=()=>{}},O=({mode:e})=>{const t=document.querySelectorAll(".tile"),s=document.querySelectorAll(".tile:not(.tile--snake):not(.tile--boost)"),a=u({min:0,max:s.length-1}),l=Array.from(t).indexOf(s[a]),o={x:l%y,y:Math.floor(l/y)},{x:c,y:r}=o;switch(e){case"food":v.class=new R(c,r),p[v.class.y][v.class.x].classList.add("tile--food");break;case"bonus":let e=new F("bonus",c,r);x.push(e);break;default:console.error("#ERR! -> Przesłano niepoprawny typ bonusu")}},P=()=>{const{x:e,y:t}=k[0];p[f.class.y][f.class.x].classList.contains("tile--snake")?T():(p[f.class.y][f.class.x].classList.add("tile--snake"),k.push({x:f.class.x,y:f.class.y}),p[t][e].classList.remove("tile--snake"),k.shift(),v.class.handleIsEaten())},B=()=>{(()=>{switch(f.class.direction){case"W":f.class.y=0===f.class.y?y-1:f.class.y-1,P();break;case"S":f.class.y=f.class.y===y-1?0:f.class.y+1,P();break;case"A":f.class.x=0===f.class.x?y-1:f.class.x-1,P();break;case"D":f.class.x=f.class.x===y-1?0:f.class.x+1,P();break;default:console.error("#ERR: Nieprawidłowy kierunek!")}})(),f.class.jumps++,f.class.jumps%(9*Math.floor(y/10))==0&&(f.class.speed=f.class.speed+.1,b.isMuted||n.play(),I.classList.add("parameter-speed--acceleration"),D({speed:f.class.speed.toFixed(2)}),setTimeout((()=>{I.classList.remove("parameter-speed--acceleration")}),1e3),M.val=750/(y/h.max)/4/f.class.speed,clearInterval(L.interval),L.set(setInterval(B,M.val))),A.toggle()},N=B,X=({key:e})=>{if("M"===e)return b.isMuted=!b.isMuted,void j.classList.toggle("sound--muted");"W"===e&&"S"===f.class.direction||"S"===e&&"W"===f.class.direction||"A"===e&&"D"===f.class.direction||"D"===e&&"A"===f.class.direction||(g.val||(f.class.direction=e,g.val=!0,b.isMuted||c.play(),M.val=750/(y/h.max)/4/f.class.speed,L.set(setInterval(N,M.val)),S.set(setInterval((()=>{b.isMuted||r.play(),w.time++,D({timer:w.time})}),1e3))),g.val&&A.state&&(A.toggle(),f.class.direction=e))};let Y;j.addEventListener("click",(()=>{b.isMuted=!b.isMuted,j.classList.toggle("sound--muted")})),z.forEach(((e,t)=>{e.addEventListener("mousedown",(()=>{e.classList.add("control--pressed")})),e.addEventListener("mouseup",(()=>{e.classList.remove("control--pressed"),X({key:["W","S","A","D"][t]})}))})),document.addEventListener("keydown",(e=>{switch(e.keyCode||e.key||e.keyIdentifier){case 87:case 38:z[0].classList.add("control--pressed");break;case 83:case 40:z[1].classList.add("control--pressed");break;case 65:case 37:z[2].classList.add("control--pressed");break;case 68:case 39:z[3].classList.add("control--pressed")}})),document.addEventListener("keyup",(e=>{let t=e.keyCode||e.key||e.keyIdentifier;switch(z.forEach((e=>e.classList.remove("control--pressed"))),t){case 87:case 38:Y="W";break;case 83:case 40:Y="S";break;case 65:case 37:Y="A";break;case 68:case 39:Y="D";break;case 77:Y="M";break;default:return}X({key:Y})})),document.addEventListener("DOMContentLoaded",(()=>{i.src=t,d.src=s,n.src=a,r.src=l,c.src=o,c.volume=.07,r.volume=.1,i.volue=.2,n.volume=.3,d.volume=.3;let e={x:u({min:Math.floor(y/2)-3,max:Math.floor(y/2)+3}),y:u({min:Math.floor(y/2)-1,max:Math.floor(y/2)+1})};f.set({payload:new m(null,Math.round(y/3),1,e.x,e.y)}),D({boardSize:y,speed:f.class.speed.toFixed(2),length:f.class.length}),(e=>{let t=0;for(let s=0;s<y;s++){let s=[];for(let a=0;a<y;a++){let a=document.createElement("div");a.classList.add("tile"),a.style.width=e.width-2+"px",a.style.height=e.height-2+"px",C.appendChild(a);const l=document.querySelectorAll(".tile");s.push(l[t]),t++}p.push(s)}})({width:C.clientWidth/y,height:C.clientHeight/y}),(()=>{for(let e=0;e<f.class.length;e++){let t={x:f.class.x,y:f.class.y+e};k.unshift({x:t.x,y:t.y}),p[f.class.y+e][f.class.x].classList.add("tile--snake")}})(),O({mode:"food"})}))})();
//# sourceMappingURL=bundle.94f9ab34ed9be54403cd.js.map